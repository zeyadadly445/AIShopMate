# دليل تخصيص مظهر الشات - AI Shop Mate

## نظرة عامة
تتيح لك ميزة تخصيص مظهر الشات تعديل الألوان والأسلوب ونمط صفحة الشات بحيث تتناسب مع علامتك التجارية.

## الوصول إلى صفحة التخصيص

### من لوحة التحكم
1. اذهب إلى لوحة التحكم `/dashboard`
2. في قسم "الخطوات التالية" ابحث عن "2. تخصيص الشات بوت" 
3. اضغط على زر "تخصيص الشات بوت"
4. ستنتقل إلى صفحة التخصيص `/customize/[chatbotId]`

### الرابط المباشر
يمكنك الوصول مباشرة عبر: `/customize/[chatbotId]`

## الميزات المتاحة

### 🎨 تبويب المظهر والألوان

#### الألوان الأساسية
- **اللون الأساسي**: يستخدم في الهيدر ورسائل المستخدم
- **اللون الثانوي**: لعناصر مساعدة 
- **خلفية الصفحة**: لون خلفية الصفحة الرئيسية

#### ألوان الرسائل
- **لون رسائل المستخدم**: خلفية فقاعات رسائل العميل
- **لون رسائل البوت**: خلفية فقاعات ردود الشات بوت
- **لون النص**: لون النص داخل رسائل البوت

#### خيارات التصميم
- **نوع الخط**: 
  - Inter (حديث)
  - Cairo (عربي)
  - Tajawal (عربي مبسط)
  - النظام الافتراضي
  - Serif (كلاسيكي)

- **انحناء الحواف**:
  - مربع (8px)
  - قليل (12px) 
  - متوسط (16px)
  - دائري (24px)
  - دائري تماماً

- **نمط الحركة**:
  - بدون حركة
  - ناعم
  - مرن
  - سريع

#### خيارات متقدمة
- **أسلوب الهيدر**:
  - حديث
  - كلاسيكي
  - بسيط
  - متدرج

- **أسلوب الرسائل**:
  - دائري
  - مربع
  - فقاعة
  - مسطح

- **رابط الصورة الشخصية**: لعرض لوجو متجرك

### 💬 تبويب النصوص والرسائل

#### النصوص القابلة للتخصيص
- **رسالة الترحيب**: أول رسالة يراها العميل
- **نص صندوق الإدخال**: النص الذي يظهر في حقل الكتابة
- **نص زر الإرسال**: نص الزر (افتراضي: "إرسال")
- **نص مؤشر الكتابة**: النص أثناء كتابة البوت (افتراضي: "يكتب...")

#### ⚠️ ملاحظة مهمة
رسائل الحدود (تجاوز الحد اليومي/الشهري) والرسائل الإجبارية يتم توليدها تلقائياً بواسطة النظام باللغة المناسبة ولا يمكن تخصيصها لضمان وضوح المعلومات المهمة.

### 👁️ تبويب المعاينة
- معاينة مباشرة للتغييرات
- زر اختبار الشات الحقيقي

## كيفية الاستخدام

### 1. تخصيص الألوان
```bash
1. اختر اللون الأساسي لعلامتك التجارية
2. اضبط ألوان الرسائل لتتناسب مع التصميم
3. اختر لون خلفية مناسب
```

### 2. تخصيص النصوص
```bash
1. اكتب رسالة ترحيب تمثل متجرك
2. خصص نصوص الواجهة باللغة المفضلة
3. اضبط نص مؤشر الكتابة
```

### 3. حفظ التخصيصات
```bash
1. اضغط "💾 حفظ التخصيصات" في أي تبويب
2. ستظهر رسالة تأكيد النجاح
3. التخصيصات ستطبق فوراً على صفحة الشات
```

### 4. اختبار التغييرات
```bash
1. اضغط "🔗 اختبار الشات" لفتح صفحة جديدة
2. تأكد من ظهور التخصيصات بالشكل المطلوب
3. إذا لم تظهر التغييرات، تأكد من حفظ التخصيصات أولاً
```

## الملفات التقنية

### قاعدة البيانات
- جدول جديد: `ChatCustomization`
- ربط مع جدول `Merchant` عبر `merchantId`
- فهارس للبحث السريع

### API Endpoints
- `GET /api/chat-appearance/[chatbotId]` - تحميل التخصيصات
- `POST /api/chat-appearance/[chatbotId]` - حفظ التخصيصات

### الصفحات المحدثة
- `/app/customize/[chatbotId]/page.tsx` - صفحة التخصيص
- `/app/chat/[chatbotId]/page.tsx` - تطبيق التخصيصات
- `/app/dashboard/page.tsx` - ربط زر التخصيص

## ميزات إضافية

### المعاينة السريعة
- لوحة جانبية تعرض معاينة مصغرة
- تحديث مباشر عند تغيير الألوان
- عرض لوحة الألوان الحالية

### التوافق مع النظام الحالي
- التخصيصات تحدث أيضاً جدول `Merchant` للتوافق
- حفظ اللون الأساسي ورسالة الترحيب في مكانين
- عدم تأثير على الوظائف الموجودة
- **رسائل الحدود تبقى إجبارية** وتستخدم نظام `language-detector.ts`

### التحقق من الأمان
- Row Level Security على جدول التخصيصات
- كل تاجر يرى تخصيصاته فقط
- التحقق من ملكية chatbotId

## استكشاف الأخطاء

### التخصيصات لا تطبق
1. تأكد من حفظ التخصيصات أولاً
2. أعد تحميل صفحة الشات
3. تحقق من وجود أخطاء في console المتصفح

### رسالة خطأ في الحفظ
1. تأكد من اتصال الإنترنت
2. تحقق من صحة صيغة الألوان (مثل #FF0000)
3. تأكد من عمل قاعدة البيانات

### التخصيصات تختفي
1. تحقق من إنشاء جدول `ChatCustomization` في قاعدة البيانات
2. تأكد من تنفيذ ملف `supabase-chat-customization.sql`

## الخطوات التالية المقترحة

### ميزات مستقبلية
- معاينة مباشرة كاملة في صفحة التخصيص
- قوالب جاهزة للألوان والأساليب
- تخصيص أكثر تفصيلاً للأيقونات والأصوات
- حفظ عدة قوالب للتبديل بينها

### تحسينات تقنية
- ضغط CSS للألوان الديناميكية
- دعم Dark Mode
- تحسين الأداء للتحميل السريع

---

**تم إنشاء هذا النظام مع الحفاظ الكامل على الوظائف الموجودة وضمان عدم تأثر أي ميزة سابقة.** 